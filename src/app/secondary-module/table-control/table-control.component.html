<div class="wrapper">
    <div *ngIf="ELEMENT_DATA.length" class="example-container mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8"
            cdkDropList
            cdkDropListOrientation="horizontal"
            (cdkDropListDropped)="drop($event)"
        >

            <!-- Checkbox Column -->
            <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? masterToggle() : null"
                            [checked]="selection.hasValue() && isAllSelected()"
                            [indeterminate]="selection.hasValue() && !isAllSelected()"
                            [aria-label]="checkboxLabel()">
                </mat-checkbox>
            </th>
            <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()"
                            (change)="$event ? selection.toggle(row) : null"
                            [checked]="selection.isSelected(row)"
                            [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
            </td>
            </ng-container>
        
            <!-- Position Column -->
            <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> № </th>
            <td mat-cell *matCellDef="let element"> {{element.position}} </td>
            </ng-container>
        
            <!-- Name Column -->
            <ng-container matColumnDef="name">
            <th cdkDrag  mat-header-cell *matHeaderCellDef> Наименование базы </th>
            <td mat-cell *matCellDef="let element"> {{element.name}} </td>
            </ng-container>
        
            <!-- availability Column -->
            <ng-container matColumnDef="availability">
            <th cdkDrag  mat-header-cell *matHeaderCellDef> Доступность </th>
            <td mat-cell *matCellDef="let element">
                <div style="width: 200px;">
                    <mat-slide-toggle (change)="toggleChange($event, element)" *ngIf="element.availability !== 'awaiting'" [checked]="element.availability" labelPosition="after" >{{element.availability ? "Доступна" : "Не доступна"}}</mat-slide-toggle>
                    <mat-progress-spinner diameter="30" *ngIf="element.availability === 'awaiting'" mode="indeterminate"></mat-progress-spinner>
                </div>
            </td>
            </ng-container>
        
            <!-- changeDate Column -->
            <ng-container matColumnDef="changeDate">
            <th cdkDrag  mat-header-cell *matHeaderCellDef> Дата изменения </th>
            <td mat-cell *matCellDef="let element"> {{element.changeDate}} </td>
            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true" class="header-row"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                >
            </tr>
        </table>
    </div>
    <div class="load-spinner-container" *ngIf="!ELEMENT_DATA.length">
        <mat-progress-spinner diameter="300" mode="indeterminate"></mat-progress-spinner>
    </div>
</div>